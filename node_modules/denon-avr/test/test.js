'use strict';

const DenonAvr = require('denon-avr').DenonAvrIp;

let avr = new DenonAvr('192.168.1.120');

avr.connect()
  .then(async () => {
    try {
      let on = await avr.checkOnOff() !== 'PWSTANDBY';
      console.log('Device is on:', on);
      if (on) {
        console.log(await avr.turnOff());
      } else {
        console.log(await avr.turnOnHeos());
      }
      on = await avr.checkOnOff() !== 'PWSTANDBY';
      console.log('Device is on:', on);
      avr.disconnect();
    } catch (err) {
      console.error(err);
    }
  })
  .catch(console.error);
